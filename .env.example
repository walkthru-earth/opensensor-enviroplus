# OpenSensor.Space Enviro+ Configuration
# https://opensensor.space
# Copy this file to .env and update with your values
# Or run 'opensensor setup' to generate automatically

# ============================================================================
# STATION CONFIGURATION
# ============================================================================

# Station ID (UUID v7 - time-ordered for better database performance)
# Run 'opensensor setup' to auto-generate, or provide your own
OPENSENSOR_STATION_ID=019ab383-d789-74e2-a460-bb92b1c13681

# ============================================================================
# DATA COLLECTION
# ============================================================================

# Seconds between sensor reads (1-60, default: 5)
OPENSENSOR_READ_INTERVAL=5

# Seconds per batch before writing to Parquet (60-3600, default: 900 = 15 min)
OPENSENSOR_BATCH_DURATION=900

# ============================================================================
# TEMPERATURE & HUMIDITY COMPENSATION
# ============================================================================

# Enable CPU heat compensation for BME280 (default: true)
# The Raspberry Pi CPU heats up and affects nearby temperature readings
OPENSENSOR_TEMP_COMPENSATION_ENABLED=true

# Compensation factor (default: 2.25 - Pimoroni's official factor)
# Higher values = less compensation, lower values = more compensation
OPENSENSOR_TEMP_COMPENSATION_FACTOR=2.25

# ============================================================================
# SYSTEM HEALTH MONITORING
# ============================================================================

# Enable health metrics collection (default: true)
# Tracks: CPU temp/load, memory, disk, WiFi signal, NTP sync, uptime
# Stored in separate output-health/ directory
OPENSENSOR_HEALTH_ENABLED=true

# ============================================================================
# OUTPUT SETTINGS
# ============================================================================

# Directory for sensor data (Hive-partitioned Parquet files)
OPENSENSOR_OUTPUT_DIR=output

# Parquet compression codec: snappy (fast), zstd (balanced), gzip (smallest)
OPENSENSOR_COMPRESSION=snappy

# ============================================================================
# LOGGING
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR (default: INFO)
OPENSENSOR_LOG_LEVEL=INFO

# Directory for log files
OPENSENSOR_LOG_DIR=logs

# ============================================================================
# CLOUD SYNC (Optional)
# ============================================================================

# Enable automatic sync to cloud storage (default: false)
# OPENSENSOR_SYNC_ENABLED=true

# Minutes between sync operations (default: 15)
# OPENSENSOR_SYNC_INTERVAL_MINUTES=15

# ============================================================================
# STORAGE PROVIDER SELECTION
# ============================================================================

# Supported providers:
#   s3       - AWS S3 (default)
#   r2       - Cloudflare R2 (S3-compatible, no egress fees)
#   gcs      - Google Cloud Storage
#   azure    - Azure Blob Storage
#   minio    - MinIO (S3-compatible, self-hosted)
#   wasabi   - Wasabi (S3-compatible, affordable)
#   backblaze - Backblaze B2 (S3-compatible)
#   hetzner  - Hetzner Object Storage (S3-compatible)

# OPENSENSOR_STORAGE_PROVIDER=s3

# ============================================================================
# COMMON STORAGE SETTINGS (All Providers)
# ============================================================================

# Bucket name (or container name for Azure)
# OPENSENSOR_STORAGE_BUCKET=my-sensor-bucket

# Prefix/path within bucket (used for IAM policy scoping)
# OPENSENSOR_STORAGE_PREFIX=sensors/station-019ab383

# Region (provider-specific, see below)
# OPENSENSOR_STORAGE_REGION=us-west-2

# Custom endpoint URL (required for R2, MinIO; optional for others)
# OPENSENSOR_STORAGE_ENDPOINT=

# ============================================================================
# AWS S3 CREDENTIALS
# ============================================================================

# For AWS S3, R2, MinIO, Wasabi, Backblaze, Hetzner (S3-compatible)

# OPENSENSOR_AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
# OPENSENSOR_AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# ============================================================================
# GOOGLE CLOUD STORAGE (GCS) CREDENTIALS
# ============================================================================

# Path to service account JSON file
# OPENSENSOR_GCS_SERVICE_ACCOUNT_PATH=/path/to/service-account.json

# Or use Application Default Credentials (gcloud auth application-default login)

# ============================================================================
# AZURE BLOB STORAGE CREDENTIALS
# ============================================================================

# Storage account name (required)
# OPENSENSOR_AZURE_STORAGE_ACCOUNT=mystorageaccount

# Authentication (use one):
# Option 1: Account key
# OPENSENSOR_AZURE_STORAGE_KEY=your-storage-account-key

# Option 2: SAS token
# OPENSENSOR_AZURE_SAS_TOKEN=your-sas-token

# ============================================================================
# PROVIDER-SPECIFIC EXAMPLES
# ============================================================================

# --- AWS S3 ---
# OPENSENSOR_STORAGE_PROVIDER=s3
# OPENSENSOR_STORAGE_BUCKET=my-sensor-bucket
# OPENSENSOR_STORAGE_REGION=us-west-2
# OPENSENSOR_AWS_ACCESS_KEY_ID=AKIA...
# OPENSENSOR_AWS_SECRET_ACCESS_KEY=...

# --- Cloudflare R2 ---
# OPENSENSOR_STORAGE_PROVIDER=r2
# OPENSENSOR_STORAGE_BUCKET=my-bucket
# OPENSENSOR_STORAGE_ENDPOINT=https://<account-id>.r2.cloudflarestorage.com
# OPENSENSOR_AWS_ACCESS_KEY_ID=<r2-access-key>
# OPENSENSOR_AWS_SECRET_ACCESS_KEY=<r2-secret-key>

# --- Google Cloud Storage ---
# OPENSENSOR_STORAGE_PROVIDER=gcs
# OPENSENSOR_STORAGE_BUCKET=my-gcs-bucket
# OPENSENSOR_GCS_SERVICE_ACCOUNT_PATH=/path/to/service-account.json

# --- Azure Blob Storage ---
# OPENSENSOR_STORAGE_PROVIDER=azure
# OPENSENSOR_STORAGE_BUCKET=my-container
# OPENSENSOR_AZURE_STORAGE_ACCOUNT=mystorageaccount
# OPENSENSOR_AZURE_STORAGE_KEY=<storage-account-key>

# --- MinIO (Self-hosted) ---
# OPENSENSOR_STORAGE_PROVIDER=minio
# OPENSENSOR_STORAGE_BUCKET=sensors
# OPENSENSOR_STORAGE_ENDPOINT=http://localhost:9000
# OPENSENSOR_AWS_ACCESS_KEY_ID=minioadmin
# OPENSENSOR_AWS_SECRET_ACCESS_KEY=minioadmin

# --- Wasabi ---
# OPENSENSOR_STORAGE_PROVIDER=wasabi
# OPENSENSOR_STORAGE_BUCKET=my-bucket
# OPENSENSOR_STORAGE_REGION=us-east-1
# OPENSENSOR_AWS_ACCESS_KEY_ID=<wasabi-access-key>
# OPENSENSOR_AWS_SECRET_ACCESS_KEY=<wasabi-secret-key>

# --- Backblaze B2 ---
# OPENSENSOR_STORAGE_PROVIDER=backblaze
# OPENSENSOR_STORAGE_BUCKET=my-bucket
# OPENSENSOR_STORAGE_REGION=us-west-004
# OPENSENSOR_AWS_ACCESS_KEY_ID=<b2-key-id>
# OPENSENSOR_AWS_SECRET_ACCESS_KEY=<b2-application-key>

# --- Hetzner Object Storage ---
# OPENSENSOR_STORAGE_PROVIDER=hetzner
# OPENSENSOR_STORAGE_BUCKET=my-bucket
# OPENSENSOR_STORAGE_REGION=fsn1
# OPENSENSOR_AWS_ACCESS_KEY_ID=<hetzner-access-key>
# OPENSENSOR_AWS_SECRET_ACCESS_KEY=<hetzner-secret-key>

# ============================================================================
# IAM POLICY EXAMPLE (AWS S3)
# ============================================================================

# Restrict each station to only write to its prefix:
#
#   {
#     "Version": "2012-10-17",
#     "Statement": [{
#       "Effect": "Allow",
#       "Action": ["s3:PutObject", "s3:GetObject", "s3:ListBucket"],
#       "Resource": [
#         "arn:aws:s3:::my-sensor-bucket",
#         "arn:aws:s3:::my-sensor-bucket/sensors/station-019ab383/*"
#       ]
#     }]
#   }
